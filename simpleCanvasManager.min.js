function SimpleCanvasManager(a){if(this.node=document.getElementById(a)){var b=document.createElement("div");b.setAttribute("id","scmContent");b.setAttribute("width",this.node.clientWidth);b.setAttribute("height",this.node.clientHeight);b.setAttribute("style","position: absolute;");this.node.appendChild(b);this.width=this.node.clientWidth;this.height=this.node.clientHeight;this.content=document.getElementById("scmContent");this.layers=[]}else console.error("Simple Canvas Manager : #"+a+" doesn't exist !")}function ScmLayer(a,b,c){this.name=b;this.zindex=c;this.lib=a;this.htmlName="scm"+b.charAt(0).toUpperCase()+b.slice(1);this.textFont="sans-serif";this.textSize=10}function ScmPixel(a,b,c){this.x=a;this.y=b;this.color=c;this.alpha=typeof alpha!="undefined"?alpha:1}function ScmRect(a,b,c,d,e){this.x=a;this.y=b;this.width=c;this.height=d;this.color=e;this.alpha=typeof alpha!="undefined"?alpha:1}function ScmCircle(a,b,c,d){this.x=a;this.y=b;this.diameter=c;this.color=d;this.alpha=typeof alpha!="undefined"?alpha:1}function ScmText(a,b,c,d,e){this.str=a;this.x=b;this.y=c;this.color=typeof d!="undefined"?d:"#000000";this.alpha=typeof e!="undefined"?e:1}function ScmImage(a,b,c,d){this.src=a;this.x=b;this.y=c;this.alpha=typeof d!="undefined"?d:1}SimpleCanvasManager.prototype.addLayer=function(a,b,c){var d=document.createElement("canvas");d.setAttribute("id","scm"+a.charAt(0).toUpperCase()+a.slice(1));d.setAttribute("width",this.width);d.setAttribute("height",this.height);d.setAttribute("style","z-index: "+b+"; position: absolute;");var e=new ScmLayer(this,a,b);this.layers.push();this.content.appendChild(d);return e};SimpleCanvasManager.prototype.getLayer=function(a){for(var b=0;b!=this.layers.length;b++)if(this.layers[b].name==a)return this.layers[b];console.error("Simple Canvas Manager : undefined reference to "+a+" layer !")};ScmLayer.prototype.getHtmlElement=function(){return document.getElementById(this.htmlName)};ScmLayer.prototype.getContext=function(a){return this.getHtmlElement().getContext(a)};ScmLayer.prototype.setBackgroundColor=function(a){var b=this.getContext("2d");b.fillStyle=a;this.update(b)};ScmLayer.prototype.setBackgroundImg=function(a){var b=this.getContext("2d"),c=new Image;c.src=a;b.drawImage(c,0,0)};ScmLayer.prototype.setAlpha=function(a){var b=this.getContext("2d");b.globalAlpha=a;this.update(b)};ScmLayer.prototype.update=function(a){a.fillRect(0,0,this.lib.width,this.lib.height)};ScmLayer.prototype.draw=function(a){var b=this.getContext("2d");if(a.alpha){b.save();b.globalAlpha=a.alpha}if(a.color)b.fillStyle=a.color;a.draw(b);if(a.alpha)b.restore()};ScmLayer.prototype.clear=function(){var a=this.getContext("2d");a.clearRect(0,0,this.lib.width,this.lib.height)};ScmLayer.prototype.getTextConfig=function(){return{font:this.textFont,size:this.textSize}};ScmLayer.prototype.setTextConfig=function(a,b){this.textFont=a;this.textSize=b;this.getContext("2d").font=b+"px "+a};ScmPixel.prototype.setAlpha=function(a){this.alpha=a};ScmPixel.prototype.draw=function(a){a.fillRect(this.x,this.y,1,1)};ScmRect.prototype.setPos=function(a,b){this.x=a;this.y=b};ScmRect.prototype.setSize=function(a,b){this.width=a;this.height=b};ScmRect.prototype.setWidth=function(a){this.width=a};ScmRect.prototype.setHeight=function(a){this.height=a};ScmRect.prototype.setColor=function(a){this.color=a};ScmRect.prototype.setAlpha=function(a){this.alpha=a};ScmRect.prototype.draw=function(a){a.fillRect(this.x,this.y,this.width,this.height)};ScmCircle.prototype.setPos=function(a,b){this.x=a;this.y=b};ScmCircle.prototype.setDiameter=function(a){this.diameter=a};ScmCircle.prototype.setColor=function(a){this.color=a};ScmCircle.prototype.setAlpha=function(a){this.alpha=a};ScmCircle.prototype.draw=function(a){a.beginPath();a.arc(this.x,this.y,this.diameter,0,Math.PI*2,true);a.closePath();a.fill()};ScmText.prototype.setAlpha=function(a){this.alpha=a};ScmText.prototype.draw=function(a){a.fillText(this.str,this.x,this.y)};ScmImage.prototype.setSrc=function(a){this.src=img};ScmImage.prototype.setPos=function(a,b){this.x=a;this.y=b};ScmImage.prototype.setX=function(a){this.x=x};ScmImage.prototype.setY=function(a){this.y=a};ScmImage.prototype.setAlpha=function(a){this.alpha=a};ScmImage.prototype.draw=function(a){var b=new Image;b.src=this.src;a.drawImage(b,this.x,this.y)}